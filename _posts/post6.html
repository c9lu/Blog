<p><font size="6"><strong>Part 1: Observable</strong></font></p>
<p>Currently, I am working on a blog site (which will soon replace my current one). The technologies that I am using for this project are Angular2 for the front end, MongoDB for saving the title, image title, category etc for the individual post,&nbsp; Express framework for handling the service calls routing, and node.js for the MongoDB api. As a developer with .NET background, these technologies are all new to me, but I got to learn a lot of new things within a short period of time which I will talk about in this post and probably the next one. </p>
<p>One of the things which I learned is Observable. As you recall in my last post I talked about Promise - which comes with EMASCRIPT 6, well Observable (from RxJS) is now stealing the spotlight of the asynchronous world in JavaScript. When handling a promise, there is resolve function which takes in a single value (either be array, object or primitive type) returned by the function call, the value then gets passed to the .then() function. An observable is like a promise, but it calls some code every time new values (not just one) become available. The thing I like the most about observable is its LINQ style query operators such as <em>.subscribe()</em> and .map() which allows you to manipulate the data being emitted. Another advantage the Observable over promise is that you can cancel a subscription.&nbsp; </p>
<p>For my project I used both Observable and Promises but in different layers of the application;&nbsp; Since Angular 2 uses RxJS in handling Observable, so the blog component is subscribed to the data stream coming from the service, and each time a new post object is retrieved from the service, the observer â€“ Posts gets updated.&nbsp; </p>
<p>In Blog.component.ts (in this case the variable Posts is the observer that receive the data from the blog service):</p>
<p><a href="https://c9lu508.files.wordpress.com/2017/03/image_thumb.png?w=584&h=72"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="https://c9lu508.files.wordpress.com/2017/03/image_thumb.png?w=584&h=72" width="584" height="72"></a></p>
<p>And in Blog.service.ts: (Notice that in the map function, it calls another function in order to create post objects from the json array returned by the Express router.)</p>
<p><a href="https://c9lu508.files.wordpress.com/2017/03/image_thumb1.png?w=584&h=190"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="https://c9lu508.files.wordpress.com/2017/03/image_thumb1.png?w=584&h=190" width="584" height="190"></a></p>
<p>The Express router (ServerRouter.js) and the Mongdb.api.js is where I used good old promise (which is the repository layer of the application). </p>
<p>ServerRouter.js (In the code below I wanted to makes sure that data is being returned from the mongodb api before it sends response)</p>
<p><a href="https://c9lu508.files.wordpress.com/2017/03/image_thumb2.png?w=349&h=210"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="https://c9lu508.files.wordpress.com/2017/03/image_thumb2.png?w=349&h=210" width="349" height="210"></a></p>
<p>And mongodb.api.js (The mongodb client comes with built in functions that return promise object such as MongoClient.connect())</p>
<p><a href="https://c9lu508.files.wordpress.com/2017/03/image_thumb3.png?w=584&h=176"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="https://c9lu508.files.wordpress.com/2017/03/image_thumb3.png?w=584&h=176" width="584" height="176"></a></p>